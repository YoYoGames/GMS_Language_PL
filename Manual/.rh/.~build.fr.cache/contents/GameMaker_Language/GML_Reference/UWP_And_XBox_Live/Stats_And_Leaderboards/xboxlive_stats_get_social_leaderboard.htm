
  
  xboxlive_stats_get_social_leaderboard
  Ta funkcja służy do wyświetlania społecznościowej tablicy rankingowej dla danej statystyki. Podajesz identyfikator użytkownika (zwrócony np. przez funkcję xboxlive_get_user()), statystykę string (zdefiniowaną podczas jej tworzenia za pomocą funkcji xboxlive_stats_set_stat_*), a następnie określasz szereg szczegółów dotyczących informacji o tablicy liderów, które chcesz uzyskać. Zauważ, że możesz pobrać tabelę liderów społecznościowych tylko dla statystyk int lub real, ale nie dla statystyk string, oraz że jeśli flag argument "favourites_only" ma wartość true, to wyniki będą zawierać tylko dane dla tych znajomych, którzy są oznaczeni przez użytkownika jako "ulubieni".
  WAŻNE! Statystyki używane w społecznościowych tabelach liderów nie muszą być zarejestrowane jako "Featured Stats" w XDP/Windows Dev Center...
  Funkcja wygeneruje wywołanie zwrotne, które spowoduje uruchomienie asynchronicznego zdarzenia społecznego. Zdarzenie to będzie miało specjalną mapę DS async_load która powinna zostać przetworzona pod kątem następujących kluczy:
  
    "id" - będzie utrzymywać stałą achievement_stat_event
    "zdarzenie" - będzie przechowywane na stronie string "GetLeaderboardComplete"
    "userid" - identyfikator użytkownika powiązany z żądaniem
    "error" - 0 w przypadku powodzenia, inna wartość, jeśli wystąpił błąd. Poniżej przedstawiono najczęstsze zwracane błędy:
      
        -2145844848: Bad request (stat nie jest poprawnym typem leaderboard, np. string)
      
    
    "errormessage" - Adres string z komunikatem o błędzie, jeśli taki jest dostępny.
    "display_name" - Unikalny identyfikator tablicy liderów zdefiniowany na pulpicie nawigacyjnym dostawcy.
    "numentries" - Liczba wejść do tabeli liderów, które otrzymałeś.
  
  Pozostała część mapy DS będzie również zawierać dane tabeli rankingowej w następującym formacie (gdzie "N" to pozycja w tabeli rankingowej, od 0 do "numentries"):
  
    "PlayerN" - Nazwa gracza, gdzie "N" jest liczbą całkowitą odpowiadającą jego pozycji na liście graczy w tabeli rankingowej.
    "PlayeridN" - unikalny identyfikator użytkownika gracza, "N".
    "RankN" -Ranga gracza "N" w tabeli rankingowej.
    "ScoreN" - wynik gracza "N".
  
   
  Składnia:
  xboxlive_stats_get_social_leaderboard(user_id, stat, num_entries, start_rank, start_at_user, favourites_only);
  
    
      
        Argument
        Typ
        Opis
      
      
        user_id
        Identyfikator użytkownika konsoli Xbox
        The user ID of the user to get the leaderboard for
      
      
        stat
        String
        The stat (as string) to create the global leaderboard from
      
      
        num_entries
        Real
        The number of entries from the global leaderboard to retrieve
      
      
        start_rank
        Real
        The rank in the leaderboard to start from (use 0 if the "start_at_user" argument is set to true)
      
      
        start_at_user
        Boolean
        Set to true aby zacząć od rangi ID użytkownika, false w przeciwnym razie (ustawione na false, jeśli argument "start_rank" ma wartość inną niż 0)
      
      
        favourites_only
        Boolean
        Set to true aby pokazywać tylko znajomych, którzy są oznaczeni jako "ulubieni" lub false w innym przypadku
      
    
  
   
  Zwroty:
  N/A
   
  Przykład rozszerzony:
  Poniżej znajduje się rozszerzony przykład użycia tej funkcji. Na początek należy ją wywołać w jakimś zdarzeniu, takim jak Rozpoczęcie lub Utworzenie pokoju:
  xboxlive_stats_get_social_leaderboard(user_id, "GlobalTime", 20, 1, false, false);
  Powyższy kod zostanie wywołany w celu uzyskania listy wszystkich pozycji w globalnej tabeli liderów w grze i wygeneruje wywołanie zwrotne zdarzenia asynchronicznego społecznościowego, którym zajmiemy się w następujący sposób:
  if (async_load[? "id"] == achievement_stat_event)
    {
        if (async_load[? "event"] == "GetLeaderboardComplete")
        {
            global.numentries = async_load[? "numentries"];
            for(var i = 0; i < numentries; i++;)
            {
                global.playername[i] = async_load[? "Player" + string(i)];
                global.playerid[i] = async_load[? "Playerid" + string(i)];
                global.playerrank[i] = async_load[? "Rank" + string(i)];
                global.playerscore[i] = async_load[? "Score" + string(i]);
            }
        }
    }
  Powyższy kod sprawdza zwróconą mapę DS w Społecznym zdarzeniu asynchronicznym i jeśli jej "id" pasuje do sprawdzanej stałej, sprawdza, czy zdarzenie zostało wywołane przez zwrócone dane tablicy liderów, a następnie wykonuje pętlę po mapie i zapisuje wszystkie różne wartości w kilku globalnych tablicach.
   
   
   
  
    
      
        Powrót: Statystyki i rankingi
        Next: xboxlive_achievement_show_achievements
      
    
    © Copyright YoYo Games Ltd. 2022 Wszystkie prawa zastrzeżone.
  
  
  

