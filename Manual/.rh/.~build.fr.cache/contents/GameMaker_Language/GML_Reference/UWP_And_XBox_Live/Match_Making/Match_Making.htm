
  
  Matchmaking
  Matchmaking (multiplayer) dla Xbox Live i UWP wymaga nieco konfiguracji, poprzez ustawienie szablonów sesji i hopperów matchmakingowych na Xbox Developer Portal. GameMaker obsługuje to za pomocą celu UWP i pozwala na następujące czynności:
  
    Tworzenie sesji dla wielu graczy
    Znajdź sesję dla wielu graczy (i/lub dołącz do niej)
    Otrzymywanie powiadomień o dołączeniu lub opuszczeniu sesji przez odpowiednich graczy, a także otrzymywanie szczegółów ich połączenia sieciowego
    Powiadomienie o migracji gospodarza sesji do innego użytkownika
    Uzyskaj listę użytkowników w sesji
    Opuść sesję
  
  Aby utworzyć sesję wieloosobową, musisz określić, jaki szablon sesji ma być użyty. Szablony sesji są zdefiniowane w XDP, ale przykład pokazano poniżej:
  Session Name: MatchSession
    Contract Version: 107
    Session Template (JSON text):
    {
        "constants": {
            "system": {
                "version": 1,
                "maxMembersCount": 12,
                "capabilities": {
            },
                "memberInitialization": {
                    "externalEvaluation": false,
                    "membersNeededToStart": 1
                }
            },
            "custom": {}
        }
    }
  Opis tych pól można znaleźć w sekcji "Session Overview" w pliku pomocy XDK. Należy pamiętać, że obecnie nie obsługujemy dynamicznego ustawiania parametrów sesji z poziomu programu GameMaker.
  Wraz z szablonem sesji należy również skonfigurować hopper dopasowujący, aby umożliwić odnalezienie sesji (jest to również wykonywane w XDP). Hoppery są używane do definiowania reguł, które są używane podczas dopasowywania graczy. Podobnie jak w przypadku parametrów sesji, nie obsługujemy obecnie dynamicznego ustawiania parametrów hoppera z poziomu GameMaker: Studio. Zobacz sekcję "SmartMatch Matchmaking Configuration" w pliku pomocy XDK, aby uzyskać więcej szczegółów.
  Następujące funkcje są dostępne dla kojarzeń Xbox Live (pamiętaj, że musisz również korzystać z funkcji sieciowych GameMaker w celu nawiązywania połączeń itd:)
  
    xboxlive_matchmaking_start
    xboxlive_matchmaking_stop
    xboxlive_matchmaking_create
    xboxlive_matchmaking_find
    xboxlive_matchmaking_session_get_users
    xboxlive_matchmaking_join_session
    xboxlive_matchmaking_session_leave
  
   
  GameMaker udostępnia dodatkowy zestaw funkcji kojarzenia, za pomocą których można zapraszać innych graczy w sieci do dołączenia do sesji lub akceptować zaproszenia do sesji innych graczy. Dostępne są następujące funkcje:
  
    xboxlive_matchmaking_send_invites
    xboxlive_matchmaking_set_joinable_session
    xboxlive_matchmaking_join_invite
  
   
  Gdy gracz przyjmie zaproszenie od innego gracza, dzieje się jedna z dwóch rzeczy:
  
    Jeśli gra jest aktualnie uruchomiona, otrzymasz Asynchroniczne zdarzenie społecznościowe z async_load mapą DS zawierającą następujące klucze/wartości:
      
        "id" - Wartość ta zostanie ustawiona na MATCHMAKING_INVITATION.
        "invitation_id" - Jest to unikalna wartość identyfikatora sesji
        "invitation_host" - jest to unikatowa wartość identyfikatora gospodarza sesji
      
      Powinieneś zapisać wartości ID i hosta, a następnie opuścić wszystkie sesje i wywołać funkcję xboxlive_matchmaking_join_invite(), przekazując jako argumenty wartości ID zaproszenia i hosta zaproszenia w zdarzeniu Step.
    
    Jeśli gra nie jest jeszcze uruchomiona, zostanie uruchomiona przez system operacyjny. Otrzymasz ten sam typ asynchronicznego zdarzenia społecznościowego z tymi samymi kluczami, które wymieniono powyżej. Zapisz je w zmiennych, a następnie połącz się z systemem dobierania gier Xbox Live i zadzwoń pod adres xboxlive_matchmaking_join_invite().
  
  Po wywołaniu adresu xboxlive_matchmaking_join_invite() użytkownik będzie próbował dołączyć do sesji, a Ty otrzymasz Asynchroniczne Zdarzenia Społeczne, tak jakbyś wywołał adres xboxlive_matchmaking_find() w tej sesji.
   
   
   
  
    
      
        Powrót: UWP i XBox Live
        Następny: Użytkownicy i konta
      
    
    © Copyright YoYo Games Ltd. 2022 Wszystkie prawa zastrzeżone.
  
  
  

