
  
  json_decode
  WAŻNE! Ta funkcja - choć nadal ważna - została zastąpiona funkcją json_parse(), dlatego zalecamy korzystanie z niej wyłącznie w celu zapewnienia wsparcia dla starszych funkcji.
  JSON (JavaScript Object Notation) to lekki format wymiany danych, który jest łatwy do odczytu i zapisu zarówno dla ludzi, jak i maszyn. Jest on zbudowany na dwóch podstawowych strukturach:
  
    Zbiór par nazwa/wartość, nazywany DS Map w programie GameMaker, ale znany także jako "słownik" lub "obiekt".
    Uporządkowana lista wartości, zwana DS List w GameMakerze, ale można ją także nazwać "tablicą" lub "sekwencją".
  
  Za pomocą tej funkcji można zdekodować fragment JSON i przekształcić go w plik DS Map, gotowy do użycia w programie GameMaker. Jeśli dekodowany JSON wymaga hierarchii list i map w ramach centralnej mapy DS, są one również dekodowane i tworzone dla Ciebie zgodnie z poniższymi zasadami (pamiętaj, że zasady te dotyczą tylko struktury najwyższego poziomu):
  
    JSON jest pojedynczą wartością - zwraca mapę DS z pojedynczym wpisem "default", który jest wartością
    JSON to tablica objects lub wartości - zwraca mapę DS z pojedynczą pozycją "default", która jest listą DS zawierającą objects lub wartości
    JSON jest obiektem - zwraca mapę DS zawierającą wpisy object.
  
  UWAGA: Podczas dekodowania tablic JSON istnieje mapa z kluczem "default" TYLKO wtedy, gdy tablica jest strukturą najwyższego poziomu, i TYLKO dla tej tablicy najwyższego poziomu. Listy wewnętrzne są dekodowane bezpośrednio do mapy DS bez umieszczania ich w mapie DS.
  UWAGA: Jeśli tablice GameMaker zostały zapisane na najwyższym poziomie lub jako zawartość mapy DS lub listy DS, zostaną zdekodowane jako listy DS, a nie tablice.
  Zazwyczaj wiadomo, do jakich kluczy dekodowany jest JSON, ale jeśli nie, można użyć opcji ds_map_size(), ds_map_find_first() oraz ds_map_find_next() aby przetworzyć mapę i uzyskać potrzebne informacje.
  UWAGA: GameMaker tworzy niezbędne mapy i listy DS z JSON, a do czyszczenia wystarczy usunąć mapę lub listę najwyższego poziomu, a GameMaker automatycznie usunie z pamięci wszystkie mapy i listy znajdujące się pod nimi.
  UWAGA: Ta funkcja umożliwia wczytywanie plików JSON z maksymalnym ograniczeniem zagnieżdżenia do 128.
  WAŻNE: W pliku JSON nie można umieszczać liczb 64-bitowych, ponieważ nie będą one działać poprawnie, ponieważ nie są obsługiwane przez format JSON.
   
  Składnia:
  json_decode(string)
  
    
      
        ArgumentTyp
        Opis
     
      
        string
        The JSON format string that you are passing to the function for decoding
     
    
  
   
  Zwroty:
  DS Map ID or -1 (if it fails)
   
  Przykład:
  var resultMap = json_decode(requestResult);
    var list = ds_map_find_value(resultMap, "default");
    var size = ds_list_size(list);
    for (var n = 0; n < ds_list_size(list); n++;)
    {
        var map = ds_list_find_value(list, n);
        var curr = ds_map_find_first(map);
        while (is_string(curr))
        {
            global.Name[n] = ds_map_find_value(map, "name");
            curr = ds_map_find_next(map, curr);
        }
    }
    ds_map_destroy(resultMap);
  Powyższy kod dekoduje plik JSON string i przetwarza go w celu wygenerowania globalnej tablicy.
   
   
   
  
    
      
        Powrót: Kodowanie plików
        Następny: json_stringify
      
    
    © Copyright YoYo Games Ltd. 2022 Wszystkie prawa zastrzeżone.
  
  
  

