
  
  Funkcje filtrów i efektów
  Przegląd
  W witrynie GML znajdują się różne funkcje, których można używać do tworzenia, modyfikowania i usuwania filtrów/efektów z warstw w witrynie room. Umożliwiają one łatwe zarządzanie efektami w czasie rzeczywistym w celu tworzenia realistycznych i dynamicznych filtrów/efektów.
   
  Ta ostatnia metoda (określanie filtra/efektu w kodzie) działa tylko w przypadku literałówłańcuchowych podanych bezpośrednio w argumencie funkcji, co oznacza, że jeśli użyjesz zmiennej lub jakiejkolwiek logiki, aby wymyślić nazwę filtra/efektu string, to kompilator asset nie wykryje tego i filtr/efekt nie zostanie załadowany.
  Rozważmy następujące przykłady:
  // This will work on its own
    var _fxshake = fx_create("_filter_screenshake");
    
    // This will NOT work on its own
    var _myfilters = { screenshake: "_screenshake" }
    var _filter_to_use = "_filter" + _myfilters.screenshake;
    var _fxshake = fx_create(_filter_to_use);
  
  Aby mieć pewność, że ta ostatnia metoda zadziała, wystarczy dodać filtr do co najmniej jednej strony room w projekcie lub upewnić się, że strona fx_create() jest wywoływana w dowolnym miejscu projektu, a nazwa filtra jest stałą string (a nie zmienną).
  Lista funkcji
  Poniższe funkcje służą do tworzenia "Struktur FX" zawierających dane efektów i zarządzania nimi:
  
    fx_create
    fx_get_parameter
    fx_get_parameters
    fx_get_name
    fx_get_parameter_names
    fx_get_single_layer
    fx_set_parameter
    fx_set_parametry
    fx_set_single_layer
  
  Poniższe funkcje służą do modyfikowania warstw, które mogą zawierać filtry/efekty, za pomocą struktur FX:
  
    layer_set_fx
    layer_get_fx
    layer_clear_fx
    layer_enable_fx
    warstwa_fx_jest_wyłączona
  
  Modyfikowanie elementów FX w czasie rzeczywistym
  Filtry/efekty można modyfikować na stronie runtime, wykonując następujące czynności:
  
    Pobierz strukturę FX z warstwy, którą chcesz zmodyfikować, wywołując polecenie layer_get_fx()
      
        Można też utworzyć nową strukturę FX struct, wywołując polecenie fx_create(), i zastosować ją do warstwy za pomocą polecenia layer_set_fx()
      
    
    Uzyskaj strukturę parametrów, wywołując fx_get_parameters()
    Zmodyfikuj parametry zgodnie z wymaganiami, przypisując wartości zmiennym struct 
      
        Nazwy parametrów można pobrać stąd: FX Types & Parameters (Typy i parametry FX)
      
    
    Zastosuj zmodyfikowaną strukturę z powrotem do FX struct, wywołując polecenie fx_set_parameters()
      
        Nie ma potrzeby wywoływania layer_set_fx() ponieważ modyfikowanie struktury FX struct wpływa bezpośrednio na warstwę, do której jest już przypisana.
      
    
  
  Poniżej znajduje się przykładowy kod dla wspomnianego wyżej przepływu pracy:
  Utwórz wydarzenie
  // Store the FX struct, and its parameters struct, in variables
    pixelate_fx = layer_get_fx("Effect_1");
    pixelate_fx_params = fx_get_parameters(pixelate_fx);
  Krok Impreza
  // Change param as variable
    pixelate_fx_params.g_CellSize = round((mouse_x / room_width) * 64);
    
    // Or, change param as string
    pixelate_fx_params[$ "g_CellSize"] = round((mouse_x / room_width) * 64);
    
    // Apply updated parameters struct to the FX struct
    fx_set_parameters(pixelate_fx, pixelate_fx_params);
  
  Parametry FX Runtime 
  Na stronie Typy i parametry FX znajduje się lista wszystkich filtrów/efektów wraz z ich parametrami w czasie rzeczywistym.
  Nazwy parametrów Runtime można wykorzystać na trzy następujące sposoby (na przykładzie parametru "g_CellSize" ):
  
    Zmodyfikuj parametr w pliku FX struct, wywołując fx_set_parameter(): fx_set_parameter(fx_struct, "g_CellSize", 8);
    Zmodyfikuj zmienną w strukturze parametrów: params_struct.g_CellSize= 8;
     
        UWAGA Upewnij się, że najpierw uzyskasz parametr struct przez wywołanie fx_get_parameters().
      
    
    Zmodyfikuj zmienną w parametrze struct, używając akcesora $ i łańcucha znaków: params_struct[$ "g_CellSize"] = 8;
  
  Tryb jednowarstwowy
  Domyślnie filtr/efekt jest stosowany do warstwy, do której jest przypisany, oraz do wszystkich warstw poniżej tej warstwy, jednak można użyć opcji fx_set_single_layer() aby włączyć tryb pojedynczej warstwy dla filtra/efektu, dzięki czemu będzie on stosowany tylko na warstwie, do której jest przypisany.
  Poniższa ilustracja przedstawia filtr zastosowany do wielu warstw (co jest domyślnym zachowaniem dla wszystkich warstw FX), a następnie ten sam filtr z włączonym trybem Pojedyncza warstwa i zastosowany do warstwy innej niż FX:
  
    
      Tryb jednowarstwowy WYŁ.
    
    
      Tryb jednowarstwowy WŁ.
    
  
  Efekty jednowarstwowe można także stosować w Edytorze Room za pomocą Inspektora.
   
   
  
    
      
        Powrót: Pokoje
        Następny: Ogólne funkcje warstwy
      
    
    © Copyright YoYo Games Ltd. 2022 Wszystkie prawa zastrzeżone.
  
  
  

