
  
  Funkcje filtrów i efektów
  Przegląd
  W witrynie GML znajdują się różne funkcje, których można używać do tworzenia, modyfikowania i usuwania filtrów/efektów z warstw w witrynie room. Umożliwiają one łatwe zarządzanie efektami w czasie rzeczywistym w celu tworzenia realistycznych i dynamicznych filtrów/efektów.
   
  Ta ostatnia metoda (określanie filtra/efektu w kodzie) działa tylko w przypadku literałówłańcuchowych podanych bezpośrednio w argumencie funkcji, co oznacza, że jeśli użyjesz zmiennej lub jakiejkolwiek logiki, aby wymyślić nazwę filtra/efektu string, to kompilator asset nie wykryje tego i filtr/efekt nie zostanie załadowany.
  Rozważmy następujące przykłady:
  // This will work on its own
    var _fxshake = fx_create("_filter_screenshake");
    
    // This will NOT work on its own
    var _myfilters = { screenshake: "_screenshake" }
    var _filter_to_use = "_filter" + _myfilters.screenshake;
    var _fxshake = fx_create(_filter_to_use);
  
  Aby mieć pewność, że ta druga metoda zadziała, wystarczy dodać filtr do co najmniej jednej strony room w projekcie lub upewnić się, że strona fx_create() jest wywoływana w dowolnym miejscu projektu, a nazwa filtra jest stałą string (a nie zmienną).
  Lista funkcji
  Poniższe funkcje służą do tworzenia "Struktur FX" zawierających dane efektów i zarządzania nimi:
  
    fx_create
    fx_get_parameter
    fx_get_parameters
    fx_get_name
    fx_get_parameter_names
    fx_get_single_layer
    fx_set_parameter
    fx_set_parametry
    fx_set_single_layer
  
  Poniższe funkcje służą do modyfikowania warstw, które zawierają lub mogą zawierać filtry/efekty, poprzez wykorzystanie struktur FX:
  
    layer_set_fx
    layer_get_fx
    layer_clear_fx
  
  Przykłady zastosowania
  Filtry/efekty można modyfikować na stronie runtime, wykonując następujące czynności:
  
    Pobierz warstwę FX struct z warstwy, którą chcesz zmodyfikować, wywołując polecenie layer_get_fx()
      
        Można też utworzyć nową warstwę FX, wywołując polecenie fx_create() i zastosować ją do warstwy za pomocą polecenia layer_set_fx()
      
    
    Pobierz jego strukturę parametrów, wywołując fx_get_parameters() i znajdź nazwy tych parametrów, wywołując fx_get_parameter_names()
    Zmodyfikuj parametry zgodnie z wymaganiami, przypisując wartości zmiennym struct 
    Zastosuj zmodyfikowaną stronę struct z powrotem do FX struct, wywołując polecenie fx_set_parameters()
      
        Nie ma potrzeby wywoływania layer_set_fx() ponieważ modyfikacja FX struct wpływa bezpośrednio na warstwę, do której jest już przypisana.
      
    
  
  Poniżej znajduje się przykładowy kod dla wspomnianego wyżej przepływu pracy:
  Utwórz wydarzenie
  // Store the FX struct, and its parameters struct, in variables
    pixelate_fx = layer_get_fx("Effect_1");
    pixelate_fx_params = fx_get_parameters(pixelate_fx);
  Krok Impreza
  // Change param as variable
    pixelate_fx_params.g_CellSize = round((mouse_x / room_width) * 64);
    
    // Or, change param as string
    pixelate_fx_params[$ "g_CellSize"] = round((mouse_x / room_width) * 64);
    
    // Apply updated parameters struct to the FX struct
    fx_set_parameters(pixelate_fx, pixelate_fx_params);
  
  Tryb jednowarstwowy
  Domyślnie filtr/efekt jest stosowany na warstwie, do której jest przypisany, oraz na wszystkich warstwach poniżej tej warstwy, jednak można użyć opcji fx_set_single_layer() aby włączyć tryb pojedynczej warstwy dla filtra/efektu, dzięki czemu będzie on stosowany tylko na warstwie, do której jest przypisany.
  Poniższa ilustracja przedstawia filtr zastosowany do wielu warstw (co jest domyślnym zachowaniem dla wszystkich warstw FX), a następnie ten sam filtr z włączonym trybem Pojedyncza warstwa i zastosowany do warstwy innej niż FX:
  
    
      Tryb jednowarstwowy WYŁ.
    
    
      Tryb jednowarstwowy WŁ.
    
  
  Efekty jednowarstwowe można także stosować w Edytorze Room za pomocą Inspektora.
   
   
  
    
      
        Powrót: Pokoje
        Następny: Ogólne funkcje warstwy
      
    
    © Copyright YoYo Games Ltd. 2022 Wszystkie prawa zastrzeżone.
  
  
  

