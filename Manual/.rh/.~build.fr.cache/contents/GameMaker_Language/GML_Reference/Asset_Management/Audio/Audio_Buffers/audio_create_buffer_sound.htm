
  
  audio_create_buffer_sound
  Za pomocą tej funkcji można utworzyć nowy dźwięk na podstawie zawartości strony buffer. Strona buffer zostanie utworzona wcześniej (szczegółowe informacje na ten temat można znaleźć w funkcjach bufora ) i zostaną do niej dodane lub załadowane dane. Następnie przekazujesz do tej funkcji format danych (obecnie obsługiwane są tylko buffer_u8 lub buffer_s16 ), częstotliwość próbkowania (która może wynosić od 1000 Hz do 48000 Hz) oraz offset do strony buffer, z której chcesz pobrać dane. Należy także podać liczbę próbek w witrynie buffer oraz kanały, których wymaga dźwięk. Kanały te są określane przez jedną z następujących stałych:
  
    
      
      
    
    
      
        Typ kanału audio
      
      
        Stała
        Opis
      
      
        audio_mono
        Dźwięk monofoniczny (jednokanałowy).
      
      
        audio_stereo
        Dźwięk stereofoniczny (dwukanałowy).
      
      
        audio_3D
        Dźwięk 3D (5.1).
      
    
  
  Po utworzeniu dźwięku należy zwolnić związany z nim indeks wskaźnika, gdy nie jest on już potrzebny, używając funkcji audio_free_buffer_sound(). Jeśli tego nie zrobisz, a następnie ponownie przypiszesz zmienną lub zmienisz adres rooms itp., identyfikator dźwięku zostanie utracony i wystąpi przeciek pamięci. Należy również pamiętać, że nie można usunąć adresu buffer, jeśli na jego podstawie został utworzony jakiś dźwięk, a dźwięk nie został najpierw zwolniony. Dlatego najpierw należy zwolnić dźwięk (lub dźwięki), a następnie usunąć buffer. Warto również zauważyć, że dodawanie czegokolwiek do adresu buffer lub zmiana rozmiaru adresu buffer po utworzeniu z niego dźwięku przyniesie nieoczekiwane rezultaty i nie jest zalecane - po rozpoczęciu tworzenia dźwięków z dowolnego adresu buffer nie należy nim później manipulować w żaden inny sposób.
   
  Składnia:
  audio_create_buffer_sound(bufferId, bufferFormat, bufferRate, bufferOffset, bufferLength, bufferChannels);
  
    
      
        Argument
        Typ
        Opis
      
      
        bufferId
        Identyfikator bufora
        The ID of the buffer to use.
      
      
        bufferFormat
        Typ danych bufora Stała
        The format of the data in the buffer (buffer_u8 lub buffer_s16).
      
      
        bufferRate
        Real
        The sample rate of the data in the buffer.
      
      
        bufferOffset
        Real
        The offset into the buffer to read the sample data from (in bytes).
      
      
        bufferLength
        Real
        The length of the buffer (the number of bytes of audio data, excluding the header).
      
      
        bufferChannels
        Typ kanału audio
        The channels to use from one of the constants listed above.
      
    
  
   
  Zwroty:
  Sound Asset
   
  Przykład:
  var rate = 44100;
    var hertz = irandom_range(220, 880);
    var samples = 44100;
    
    var bufferId = buffer_create(rate, buffer_fast, 1);
    buffer_seek(bufferId, buffer_seek_start, 0);
    
    var num_to_write = rate / hertz;
    var length = buffer_get_size(bufferId);
    var val_to_write = 1;
    
    for (var i = 0; i < (samples / num_to_write) + 1; i++)
    {
        for (var j = 0; j < num_to_write; j++)
        {
            buffer_write(bufferId, buffer_u8, val_to_write * 255);
        }
        val_to_write = (1 - val_to_write);
    }
    
    soundId = audio_create_buffer_sound(bufferId, buffer_u8, rate, 0, length, audio_stereo);
  
  Powyższe polecenie tworzy stronę buffer, a następnie proceduralnie wypełnia ją danymi. Dane te są następnie używane do tworzenia nowego dźwięku, który jest przechowywany w zmiennej "soundId".
   
   
   
  
    
      
        Powrót: Bufory audio
        Następny: audio_free_buffer_sound
      
    
    © Copyright YoYo Games Ltd. 2022 Wszystkie prawa zastrzeżone.
  
  
  

