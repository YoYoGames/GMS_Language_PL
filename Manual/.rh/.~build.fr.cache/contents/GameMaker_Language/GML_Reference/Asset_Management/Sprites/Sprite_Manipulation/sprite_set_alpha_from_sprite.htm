
  
  sprite_set_alpha_from_sprite
  Ta funkcja wykorzystuje wartość/nasycenie jednej strony sprite i mnoży ją przez alfę docelowej strony sprite. Najlepiej byłoby, gdyby strona sprite użyta do wygenerowania nowej mapy alfa była w skali szarości - białe obszary miałyby wartość alfa równą 1 (nieprzezroczyste), czarne obszary miałyby wartość alfa równą 0 (przezroczyste), a szare obszary miałyby wartość alfa pomiędzy 0 a 1. Strona sprite, na której ustawiasz alfa, nie może być zasobem stałym, podobnie jak strona sprite, której używasz do ustawienia alfa, ponieważ spowoduje to wystąpienie błędu. Oznacza to, że aby funkcja działała poprawnie, musisz w jakiś sposób utworzyć dwie zupełnie nowe strony sprites "w locie". Można to osiągnąć za pomocą powierzchni lub tworząc stronę sprite z ekranu (poniższy przykład kodu pokazuje, jak można uzyskać ten efekt za pomocą powierzchni).
  UWAGA: Ta funkcja jest przydatna tylko w przypadku map bitowych sprites i nie będzie działać z plikami SWF lub JSON (Spine) sprites.
  Poniżej znajduje się rysunek ilustrujący działanie tej funkcji:
  
   
  Składnia:
  sprite_set_alpha_from_sprite(ind, spr);
  
    
      
        ArgumentTyp
        Opis
     
      
        ind
        The index of the sprite to change the transparency map of.
     
      
        spr
        The index of the sprite to take the transparency map data from.
     
    
  
   
  Zwraca
  
   
  Przykład rozszerzony:
  W tym rozszerzonym przykładzie pokazujemy, jak można utworzyć efekt specjalny sprite z dwóch zasobów sprite. Na początek musimy utworzyć zmienną kontrolera w zdarzeniu Create instancji. Zmienna ta ma zapewnić, że sprite zostanie utworzona tylko raz:
  spr_create = true;
  Po wykonaniu tych czynności należy przejść do zdarzenia Draw i dodać poniższy kod:
  if spr_create
    {
        spr_create = false;
        var _sw = sprite_get_width(spr_Explosion_Alpha);
        var _sh = sprite_get_height(spr_Explosion_Alpha);
        var _xo = sprite_get_xoffset(spr_Gradient);
        var _yo = sprite_get_yoffset(spr_Gradient);
        var _surf = surface_create(_sw, _sh);
        surface_set_target(_surf);
        draw_clear_alpha(c_black, 0);
        draw_sprite(spr_Gradient, 0, 0, 0);
        sprite_index = sprite_create_from_surface(_surf, 0, 0, _sw, _sh, false, false, _xo, _yo);
        draw_clear_alpha(c_black, 0);
        draw_sprite(spr_Explosion_Alpha, 0, _xo, _yo);
        var _spr = sprite_create_from_surface(_surf, 0, 0, _sw, _sh, false, false, _xo, _yo);
        surface_reset_target();
        surface_free(_surf);
        sprite_set_alpha_from_sprite(sprite_index, _spr);
        sprite_delete(_spr);
    }
    
    draw_sprite(sprite_index, 0, x, y);
  
  Powyższy kod najpierw sprawdza, czy zmienna sterująca ma wartość true, a jeśli tak, to uruchamia kod ustawiający alfę sprite, ustawiając zmienną na false, aby zapobiec wielokrotnemu uruchamianiu kodu. W tym przypadku tworzy powierzchnię o rozmiarze maski alfa, której chcemy użyć, następnie rysuje na niej stronę sprite, której alfa ma zostać zmieniona, i tworzy na jej podstawie nową stronę sprite, przypisując ją jako sprite_index strony object. Następnie kod czyści powierzchnię i rysuje na niej mapę alfa sprite oraz tworzy kolejną nową stronę sprite, zapisując jej indeks w zmiennej lokalnej. Na koniec nowa strona sprite przypisana do object otrzymuje swój zestaw alfa z tymczasowej strony sprite, powierzchnia jest zwalniana, a tymczasowa strona sprite jest usuwana.
  Pozostaje jeszcze jedna rzecz do zrobienia, a mianowicie usunięcie z pamięci adresu sprite, który został utworzony dla adresu object, gdy nie jest używany. Można to zrobić w zdarzeniu Destroy lub w zdarzeniu Room End, jak poniżej:
  sprite_delete(sprite_index);
   
   
   
  
    
      
        Powrót: Manipulacja sprite'ami
        Następny: sprite_set_cache_size
      
    
    © Copyright YoYo Games Ltd. 2021 Wszystkie prawa zastrzeżone.
  
  
  

