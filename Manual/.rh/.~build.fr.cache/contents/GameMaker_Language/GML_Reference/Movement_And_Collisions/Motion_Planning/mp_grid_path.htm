
  
  mp_grid_path
  Za pomocą tej funkcji można utworzyć stronę path, która będzie poruszać się od punktu początkowego do punktu końcowego za pomocą wcześniej zdefiniowanej strony mp_grid, omijając wszelkie przeszkody, które zostały już dodane do siatki. Argumenty xstart i ystart wskazują początek path we współrzędnych room, natomiast argumenty xgoal, ygoal wskazują punkt docelowy. Można również wybrać albo tylko ruch poziomy/pionowy, albo zezwolić na pełny ruch po przekątnej, podając true w argumencie allowdiag. Funkcja zwraca wartość true (udało się znaleźć path) lub false (nie udało się) oraz ustawia wybraną stronę path. Na poniższym rysunku widać, jak to wszystko razem działa:
  Jak widać, "rury" objects zostały dodane do siatki, co oznacza, że każda utworzona strona path musi je obejść. Na obrazku są utworzone dwie strony paths, jedna (zielona) z dozwolonymi przekątnymi, a druga (czerwona) bez. Różnica między nimi jest dość oczywista - zielona strona path wydaje się bardziej elegancka i bezpośrednia, ale to, którą z nich wybierzesz, zależy od tego, do czego będziesz je wykorzystywać. Zwróć uwagę, że path jest niezależny od bieżącej instancji - jest to path przez całą siatkę, a nie path dla konkretnej instancji, mimo że konkretna instancja może mieć zmienną przechowującą indeks path. Może się też zdarzyć, że będziesz musiał debugować te paths, aby zobaczyć, jak są tworzone i jak działają w środowisku gry - w takim przypadku powinieneś użyć funkcji draw_path().
  UWAGA: Adres path musi być wcześniej utworzony (w kodzie za pomocą path_add() lub jako zasób) i zostanie zastąpiony przez stronę path wygenerowaną przez tę funkcję.
   
  Składnia:
  mp_grid_path(id, path, xstart, ystart, xgoal, ygoal, allowdiag);
  
    
      
        Argument
        Typ
        Opis
      
      
        id
        Identyfikator siatki MP
        Index of the mp_grid that is to be used
      
      
        path
        Aktywa na ścieżce
        index of the path that is to be used by the function
      
      
        xstart
        Real
        Starting x coordinate of the new path
      
      
        ystart
        Real
        Starting y coordinate of the new path
      
      
        xgoal
        Real
        Finishing x coordinate of the new path
      
      
        ygoal
        Real
        Finishing y coordinate of the new path
      
      
        allowdiag
        Boolean
        Indicates whether diagonal moves are allowed instead of just horizontal or vertical
      
    
  
   
  Zwroty:
  Boolean
   
  Przykład:
  global.grid = mp_grid_create(0, 0, room_width div 32, room_height div 32, 32, 32);
    mp_grid_add_instances(global.grid, obj_wall, false);
    with (obj_Enemy)
    {
        path = path_add();
        if mp_grid_path(global.grid, path, x, y, obj_Player.x, obj_Player.y, 1)
        {
            path_start(path, 0, 3, 0);
        }
    }
  Powyższy kod tworzy zmienną globalną "global.grid", a następnie generuje mp_grid i przypisuje jej indeks (id) do tej zmiennej, aby użyć jej we wszystkich dalszych wywołaniach funkcji mp_grid. Następnie dodaje wszystkie instancje "obj_Wall" do siatki, zanim pobierze wszystkie instancje "obj_Enemy", aby utworzyć path i użyć mp_grid_path do obliczenia trasy od ich pozycji do pozycji "obj_Player". Jeśli trasa istnieje, to object zaczyna się wzdłuż path.
   
   
   
  
    
      
        Powrót: Planowanie ruchu
        Następny: mp_grid_add_cell
      
    
    © Copyright YoYo Games Ltd. 2022 Wszystkie prawa zastrzeżone.
  
  
  

