
  
  Komunikaty rozsyłane
  Zarówno sekwencje, jak i sprite 'y mogą generować tzw. komunikaty rozgłoszeniowe w dowolnym punkcie swojej długości. Wiadomości te to proste strings, które są dodawane do określonych klatek animacji timeline, a gdy ten punkt w timeline zostanie osiągnięty, wiadomość string zostanie rozesłana do wszystkich instancji, które jej słuchają. Każda instancja, która posiada zdarzenie Broadcast Message Event (znajdujące się w kategorii zdarzeń "Inne"), otrzyma wiadomość string, gdy zostanie ona osiągnięta w timeline, w którym to momencie do Ciebie należy kod, który ją przetworzy i odpowiednio zareaguje. Należy również pamiętać, że sequences może również nasłuchiwać wiadomości nadawanych, ale wymaga to uprzedniego skonfigurowania metody nasłuchiwania za pomocą kodu (więcej informacji na ten temat można znaleźć w części GML poświęconej zdarzeniom sekwencyjnym i momentom ).
  UWAGA Ustawienie image_index instancji bezpośrednio na ramkę nie spowoduje wyzwolenia żadnych komunikatów Broadcast, które mogą być obecne w tej ramce obiektu sprite.
  Aby dodać wiadomość do transmisji na stronie sequence lub sprite timeline, wystarczy kliknąć przycisk . Spowoduje to otwarcie okna dialogowego, w którym można dodać wiadomość przeznaczoną do nadania:
  
  Po dodaniu wiadomość zostanie wyświetlona na stronie Dope Sheet (lub w widoku ramki sprite ). Aby go edytować, należy kliknąć prawym przyciskiem myszy  na ikonie komunikatu, aby otworzyć listę wszystkich komunikatów, które zachodzą na ramkę (na jednej ramce może znajdować się tylko jeden komunikat, ale umieszczenie wielu komunikatów na kolejnych ramkach spowoduje, że będą się one wizualnie nakładać, co utrudni wybranie pożądanego komunikatu; na tej samej ramce może znajdować się również komunikat i chwila ), a następnie wybranie jednego z nich z tej listy spowoduje otwarcie okna dialogowego komunikatu, w którym można go edytować lub usunąć.
  Po wyzwoleniu zdarzenia Broadcast Message zostanie utworzona specjalna mapa DS Map, która będzie przechowywana we wbudowanej zmiennej event_data. Ta zmienna ID jest wbudowaną zmienną o zasięgu globalnym , ale będzie zawierać dane mapy DS tylko w zdarzeniu, które ją wywołało - w tym przypadku w zdarzeniu Komunikat Broadcast - a w pozostałych przypadkach będzie zwracać wartość -1. Klucze, jakie będzie miało to zdarzenie, są następujące:
  
    
      
      
      
    
    
      
        Komunikat Struktura zdarzeń
      
      
        Zmienna
        Typ
        Opis
      
      
        event_type
        String
        Będzie to string "sequence event" dla wiadomości wysłanej z adresu Sequence oraz "sprite event" dla wiadomości wysłanej z adresu Sprite.
      
      
        message
        String
        Zawiera odebraną wiadomość string.
      
      
        element_id
        Identyfikator elementu warstwy
        Zawiera on identyfikator elementu warstwy (sekwencji/spisu/instancji), który wygenerował komunikat. Wartość tego identyfikatora można następnie wykorzystać do sprawdzenia, jaki element wygenerował komunikat, używając funkcji layer_get_element_type() oraz użyć innych odpowiednich funkcji, aby skierować komunikat na dany element lub wykonać odpowiednią akcję, np. odtworzyć dźwięk.
      
    
  
  Zauważ, że zdarzenie broadcast message w instancji otrzyma wiele strings dla każdego z przypadków wysłania wiadomości broadcast. Nie musisz działać na wszystkich z nich i możesz mieć różne instancje nasłuchujące różnych wiadomości strings. Może się jednak zdarzyć, że jedna instancja będzie nasłuchiwała wiadomości, które mogą być odebrane w tym samym czasie. W takim przypadku zdarzenie zostanie wywołane wielokrotnie - raz dla każdego ciągu komunikatów.
  Poniżej przedstawiono krótki przykład, jak można sprawdzić to zdarzenie:
  if event_data[? "event_type"] == "sequence event" // or you can check "sprite event"
    {
        switch (event_data[? "message"])
        {
            case "hit":
                audio_play_sound(snd_hit, 0, false);
            break;
    
            case "destroy":
                sequence_destroy(event_data[? "element_id"]);
            break;
        }
    }
  
   
   
   
  
    
      
        Powrót: Sekwencje
        Następny:  Sequence Canvas
      
    
    © Copyright YoYo Games Ltd. 2022 Wszystkie prawa zastrzeżone.
  
  
  

