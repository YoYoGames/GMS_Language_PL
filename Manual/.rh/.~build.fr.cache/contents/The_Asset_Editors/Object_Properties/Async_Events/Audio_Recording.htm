
  
  Nagrywanie dźwięku
  To zdarzenie może być wywołane tylko przez audio_start_recording() funkcja
    i zwróci mapę DS Map przechowywaną w zmiennej async_load,
    zawierającą różne pary klucz/wartość w zależności od wywołania zwrotnego funkcji, która wywołała zdarzenie.
  W mapie ds_map będą dostępne następujące klucze:
  
    "buffer_id" - identyfikator bufora tymczasowego, którego można użyć do pobierania danych audio
    "channel_index" - indeks kanału zapisu zwrócony przez funkcję wywołującą, z którego pochodzą te dane
    "data_len" - długość odebranych danych (w bajtach)
  
  UWAGA: Jak wspomniano na początku tej strony, zmienna async_load jest ważna tylko w zdarzeniach asynchronicznych, ponieważ mapa DS, na którą wskazuje, jest tworzona na początku zdarzenia,
    a następnie ponownie usuwana na końcu. Należy jednak pamiętać, że tymczasowy adres buffer, w którym wraz z mapą przechowywany jest cały dźwięk, również zostanie usunięty po zakończeniu zdarzenia, więc jeśli chcesz go zachować do późniejszego użytku, powinieneś skopiować go do niestandardowego adresu buffer.
  W poniższym przykładzie użycia utworzymy niestandardowy adres buffer, w którym będziemy przechowywać nagrany dźwięk, a także ustawimy grę tak, aby nagrywała ze źródła wejściowego 0:
  channel_index = audio_start_recording(0); audio_buffer = buffer_create(len, buffer_fast, 1);
  W każdym kroku gry, w którym wykryto nagrywanie, zostanie uruchomione zdarzenie asynchronicznego nagrywania dźwięku, w którym można zająć się nagranym sygnałem wejściowym w następujący sposób:
  var channel = async_load[? "channel_index"]; if channel == channel_index    {    len = async_load[? "data_len"];    buffer_copy(async_load[? "buffer_id"], 0, len, audio_buffer, 0);    }
  Tutaj po prostu sprawdzamy klucz "channel_index", aby upewnić się, że odpowiada on wartości zwróconej podczas rozpoczęcia nagrywania, a jeśli tak jest, kopiujemy zawartość tymczasowej strony buffer utworzonej dla tego zdarzenia do naszej własnej strony buffer. Następnie możesz
    zrobić co chcesz z niestandardowym buffer - możesz go odtworzyć za pomocą dedykowanych funkcji audio buffer, możesz go przetworzyć i wysłać przez sieć, możesz go zapisać na dysku... Gdy nagrany dźwięk znajdzie się na stronie buffer, można z nim zrobić w zasadzie
    wszystko, co chcesz.
   
   
   
  
    
      
        Powrót: Zdarzenia asynchroniczne
        Następny: Chmura
      
    
    © Copyright YoYo Games Ltd. 2021 Wszystkie prawa zastrzeżone.
  
  
  

